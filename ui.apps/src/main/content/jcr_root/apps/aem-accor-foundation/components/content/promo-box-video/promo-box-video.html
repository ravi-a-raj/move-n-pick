<sly data-sly-use.templates="core/wcm/components/commons/v1/templates.html" data-emptytext="Teaser" data-sly-call="${templates.placeholder @ isEmpty = !properties.headline, classAppend='cmp-teaser-global-placeholder'}" />
<sly data-sly-use.promoVideoItem="${'com.chubb.foundation.models.PromoVideoModel'}" data-sly-set.layouts="${properties.cq:styleIds}" />

<!-- Teaser default (Lead Gen) variation -->

<sly data-sly-test="${'cmp-promo-box-video-left' in layouts || 'cmp-promo-box-video-right' in layouts}">
	<section class="cta-teaser__content ${'cmp-promo-box-video-left' in layouts ? 'cta-teaser__content--left' : ''} ${'cmp-promo-box-video-right' in layouts ? 'cta-teaser__content--right' : ''}" aria-labelledby="TeaserVideo-${promoVideoItem.id}">
		<div class="row cta-teaser__content__row cmp-nobleed__container">
				<div class="col-sm-6 col-md-6 col-xs-12 cta-teaser__content__image">
				<sly data-sly-test="${promoVideoItem.videoThumbnail}">
					<picture>
						<img src="${promoVideoItem.videoThumbnail}" alt="${promoVideoItem.altText =='true' ? true : promoVideoItem.altText}"/>
						<img src="/content/dam/chubb-sites/chubb-com/global/icons/play-icon.png" alt="Play icon" class="play-button ${promoVideoItem.videoType == 'Brightcove' ? 'bc-video' :''}" data-video="${promoVideoItem.dataVideo}" data-toggle="modal" data-target="#videoModal-${resource.path.hashCode}"/>
					</picture>
				</sly>
				</div>

			<div class="col-sm-6 col-md-6 col-xs-12 d-flex align-items-center">
				<div class="cta-teaser__content__item">
					<span id="TeaserVideo-${promoVideoItem.id}" class="cta-teaser__content__item__eyebrow"
						data-sly-test="${promoVideoItem.preTitle}">${promoVideoItem.preTitle}</span>
					<h2 id="VideoModal-${promoVideoItem.id}" class="cta-teaser__content__item__title"
						data-sly-test="${promoVideoItem.title}">${promoVideoItem.title}</h2>
					<div class="cta-teaser__content__item__desc"> ${promoVideoItem.description @ context='html'} </div>
					<sly data-sly-test="${'cmp-promo-video__cta-primary' in layouts}">
						<sly data-sly-use.component="/apps/aem-chubb-foundation/components/content/shared/cta/cta.html" data-sly-call="${component.template @ cssClass = 'primary_btn', linkModel = promoVideoItem.cta, componentTitle = promoVideoItem.title}"/>
					</sly>
					<sly data-sly-test="${'cmp-promo-video__cta-secondary' in layouts}">
						<sly data-sly-use.component="/apps/aem-chubb-foundation/components/content/shared/cta/cta.html" data-sly-call="${component.template @ cssClass = 'secondary_btn', linkModel = promoVideoItem.cta, componentTitle = promoVideoItem.title}"/>
					</sly>
				</div>
			</div>
		</div>
	</section>
</sly>


<!-- Teaser Bottom Video variation -->
<sly data-sly-test="${'cmp-promo-box-video-bottom' in layouts}">
	<section class="cmp-teaser__content ${'cmp-promo-box-video-bottom' in layouts ? 'cmp-teaser-bottom-video' : ''}" aria-labelledby="TeaserVideo-${promoVideoItem.id}" >
			<div class="row">
				<div class="col-md-6 col-xs-12 col-md-offset-6 col-xs-offset-0">
					<span id="TeaserVideo-${promoVideoItem.id}" class="cmp-teaser__content__item__eyebrow" data-sly-test="${promoVideoItem.preTitle}">${promoVideoItem.preTitle}</span>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6 col-xs-12">
					<h2 id="VideoModal-${promoVideoItem.id}" class="cmp-teaser__content__item__title" data-sly-test="${promoVideoItem.title}">${promoVideoItem.title}</h2>
				</div>
				<div class="col-sm-6 col-xs-12">
					<div class="cmp-teaser__content__item__desc" data-sly-test="${promoVideoItem.description}">${promoVideoItem.description @ context='html'}</div>
					<sly data-sly-test="${'cmp-promo-video__cta-primary' in layouts}">
						<sly data-sly-use.component="/apps/aem-chubb-foundation/components/content/shared/cta/cta.html" data-sly-call="${component.template @ cssClass = 'primary_btn', linkModel = promoVideoItem.cta, componentTitle = promoVideoItem.title}"/>
					</sly>
					<sly data-sly-test="${'cmp-promo-video__cta-secondary' in layouts}">
						<sly data-sly-use.component="/apps/aem-chubb-foundation/components/content/shared/cta/cta.html" data-sly-call="${component.template @ cssClass = 'secondary_btn', linkModel = promoVideoItem.cta, componentTitle = promoVideoItem.title}"/>
					</sly>

				</div>
			</div>
			<div class="row">
			<div class="col-sm-12 col-md-12 col-xs-12 cmp-teaser__content__image">
			<sly data-sly-test="${promoVideoItem.videoThumbnail}">
				<picture>
					<img src="${promoVideoItem.videoThumbnail}" alt="${promoVideoItem.altText =='true' ? true : promoVideoItem.altText}"/>
					<img src="/content/dam/chubb-sites/chubb-com/global/icons/play-icon.png" alt="Play icon" class="play-button ${promoVideoItem.videoType == 'Brightcove' ? 'bc-video' :''}" data-video="${promoVideoItem.dataVideo}" data-toggle="modal" data-target="#videoModal-${resource.path.hashCode}"/>
				</picture>
				</sly>
			</div>
			</div>
	</section>
</sly>

<!-- Modal -->
<div class="modal fade video-modal ${promoVideoItem.videoType == 'Brightcove' ? 'bc-video-modal': '' }" id="videoModal-${resource.path.hashCode}" tabindex="-1" role="dialog" aria-labelledby="VideoModal-${promoVideoItem.id}" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true"><em class="icon icon-close"></em></span>
			</button>
			<div class="modal-body">
				<sly data-sly-test="${promoVideoItem.videoType == 'Youtube' && promoVideoItem.youtubeLink}">
                    <div class="embed-responsive embed-responsive-16by9">
                    	<iframe title="video" class="embed-responsive-item modal-video" id="video-${resource.path.hashCode}"
                                        src="${promoVideoItem.youtubeLink}"
                                        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen="" enablejsapi="1"></iframe>
                    </div>
              </sly>
              <sly data-sly-test="${promoVideoItem.videoType == 'Brightcove' && promoVideoItem.videoPlayer}">
              	<div class="video-player">
                    <div style="padding-top: 51.5%;">
                        <video muted id="video-${promoVideoItem.videoPlayer}" data-id="video-${promoVideoItem.videoPlayer}" data-account=${promoVideoItem.brightcoveAccount} data-video-title="${properties.dataVideoTitle}" data-video-id="${promoVideoItem.videoPlayer}" data-player="default" data-embed="default" class="video-js" controls style="width: 100%; height: 100%; position: absolute; top: 0px; bottom: 0px; right: 0px; left: 0px;"> </video>
                    </div>
                </div>
              </sly>
			</div>
		</div>
	</div>
</div>
